---
- name: Artfactory absolute path is set
  set_fact:
     artifactoryAbsoluteUrl: "{{artifactoryUrl}}{{artifactName}}"
  no_log: true
  
- name: Find artifact file type
  shell: "echo '{{artifactName}}' |awk -F . '{if (NF>1) {print $NF}}'"
  register: extension
  
- name: Debug
  debug:
    msg: "{{extension.stdout}}"
  
- name: ZipFileName is set
  set_fact:
     zipFileName: "{{buildBaseDir}}/zipDir/{{artifactName}}"
  when: (extension.stdout == 'zip' )
     
- name: Download artifact from Artifactory if it is zip
  shell: " curl -l {{ artifactoryAbsoluteUrl }} -o {{ zipFileName }}"
  when: not(
          (zipFileName is undefined)
          or
          (zipFileName  is none)
          or
          (zipFileName | trim == '')
        )

